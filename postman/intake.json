{
  "info": {
    "name": "Intake Forms (Admin + Public)",
    "_postman_id": "9b8c3e4f-aaaa-bbbb-cccc-d6e7f8a90123",
    "description": "Dynamic intake forms: admin endpoints to create forms, questions, links & review responses; public endpoints to fetch schema, upload files, and submit.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "base_url", "value": "http://localhost:3000" },
    { "key": "token", "value": "" },
    { "key": "formId", "value": "" },
    { "key": "questionId", "value": "" },
    { "key": "linkId", "value": "" },
    { "key": "responseId", "value": "" },
    { "key": "slug", "value": "" },
    { "key": "fileId", "value": "" },
    { "key": "userId", "value": "" }
  ],
  "item": [
    {
      "name": "ADMIN — Forms",
      "item": [
        {
          "name": "Create Form",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Onboarding - General\",\n  \"description\": \"Base intake used for new clients\",\n  \"createdById\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms"]
            }
          }
        },
        {
          "name": "List Forms",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/forms?page=1&limit=12&search=",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "12" },
                { "key": "search", "value": "" }
              ]
            }
          }
        },
        {
          "name": "Get Form (with questions)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}"]
            }
          }
        },
        {
          "name": "Update Form (title/description/isPublished)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Onboarding - General (v2)\",\n  \"description\": \"Updated intro and trimmed fields\",\n  \"isPublished\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}"]
            }
          }
        },
        {
          "name": "Delete Form",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ADMIN — Questions",
      "item": [
        {
          "name": "Upsert Question (create/update)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"What is your current weight?\",\n  \"type\": \"number\",\n  \"required\": true,\n  \"min\": 30,\n  \"max\": 400,\n  \"placeholder\": \"e.g., 82\",\n  \"helpText\": \"Use kg if metric\",\n  \"audience\": \"all\",\n  \"tags\": [\"general\"],\n  \"orderIndex\": 0\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/questions",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "questions"]
            }
          }
        },
        {
          "name": "Upsert Question (select with options)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Preferred training time\",\n  \"type\": \"select\",\n  \"required\": true,\n  \"options\": [\n    {\"label\":\"Morning\",\"value\":\"morning\"},\n    {\"label\":\"Afternoon\",\"value\":\"afternoon\"},\n    {\"label\":\"Evening\",\"value\":\"evening\"}\n  ],\n  \"audience\": \"all\",\n  \"orderIndex\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/questions",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "questions"]
            }
          }
        },
        {
          "name": "Upsert Question (female-only)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"label\": \"Are you currently pregnant?\",\n  \"type\": \"radio\",\n  \"required\": false,\n  \"options\": [\n    {\"label\":\"Yes\",\"value\":\"yes\"},\n    {\"label\":\"No\",\"value\":\"no\"}\n  ],\n  \"audience\": \"female\",\n  \"orderIndex\": 2\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/questions",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "questions"]
            }
          }
        },
        {
          "name": "Reorder Questions",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ids\": [\n    \"{{questionId}}\",\n    \"another-question-id\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/questions/reorder",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "questions", "reorder"]
            }
          }
        },
        {
          "name": "Delete Question",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/questions/{{questionId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "questions", "{{questionId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ADMIN — Links",
      "item": [
        {
          "name": "Create Shareable Link",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"audience\": \"all\",\n  \"tags\": [\"general\"],\n  \"assigneeId\": null,\n  \"expiresAt\": null,\n  \"singleUse\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/links",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "links"]
            }
          }
        },
        {
          "name": "List Links for Form",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/forms/{{formId}}/links",
              "host": ["{{base_url}}"],
              "path": ["intake", "forms", "{{formId}}", "links"]
            }
          }
        },
        {
          "name": "Delete Link",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/links/{{linkId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "links", "{{linkId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ADMIN — Responses",
      "item": [
        {
          "name": "List Responses",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/responses?formId={{formId}}&page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["intake", "responses"],
              "query": [
                { "key": "formId", "value": "{{formId}}" },
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "Get Response Detail",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}", "type": "text" }
            ],
            "url": {
              "raw": "{{base_url}}/intake/responses/{{responseId}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "responses", "{{responseId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "PUBLIC — Schema & Submit",
      "item": [
        {
          "name": "Fetch Public Form Schema (by slug)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/intake/public/{{slug}}",
              "host": ["{{base_url}}"],
              "path": ["intake", "public", "{{slug}}"]
            }
          }
        },
        {
          "name": "Upload File (for FILE question)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/intake/public/upload",
              "host": ["{{base_url}}"],
              "path": ["intake", "public", "upload"]
            }
          }
        },
        {
          "name": "Submit Answers",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"answers\": [\n    {\n      \"questionId\": \"{{questionId}}\",\n      \"value\": 82\n    },\n    {\n      \"questionId\": \"another-question-id\",\n      \"value\": \"evening\"\n    },\n    {\n      \"questionId\": \"file-question-id\",\n      \"fileId\": \"{{fileId}}\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/intake/public/{{slug}}/submit",
              "host": ["{{base_url}}"],
              "path": ["intake", "public", "{{slug}}", "submit"]
            }
          }
        }
      ]
    }
  ]
}
